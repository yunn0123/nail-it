<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾ç”²é ç´„ç³»çµ±å®Œæ•´ API æ–‡æª”</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui.css" />
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }
        *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            margin:0;
            background: #fafafa;
        }
        .swagger-ui .topbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .swagger-ui .topbar .download-url-wrapper .select-label {
            color: white;
        }
        .swagger-ui .info .title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .header-note {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header-note">
        <h2>ğŸ’… ç¾ç”²é ç´„ç³»çµ±å®Œæ•´ API æ–‡æª”</h2>
        <p>åŒ…å«èªè­‰ã€ç”¨æˆ¶ç®¡ç†ã€é ç´„ç®¡ç†ã€AI æ¨™è¨»ã€æœå°‹ç­‰æ‰€æœ‰åŠŸèƒ½</p>
        <p><small>ğŸš€ æ”¯æ´é›¢ç·šæŸ¥çœ‹ï¼Œç„¡éœ€ä¼ºæœå™¨é‹è¡Œ</small></p>
    </div>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function() {
            // å®Œæ•´çš„ OpenAPI è¦æ ¼å…§åµŒåˆ° JavaScript ä¸­
            const completeApiSpec = {
                "openapi": "3.0.3",
                "info": {
                    "title": "ç¾ç”²é ç´„ç³»çµ±å®Œæ•´ API",
                    "description": "å®Œæ•´çš„ç¾ç”²é ç´„ç³»çµ± APIï¼ŒåŒ…å«ç”¨æˆ¶è¨»å†Šç™»å…¥ã€ç¾ç”²å¸«ç®¡ç†ã€é ç´„ç³»çµ±ã€åœ–ç‰‡æ¨™è¨»å’Œæœå°‹åŠŸèƒ½ã€‚\n\n## ä¸»è¦åŠŸèƒ½\n- ğŸ” ç”¨æˆ¶è¨»å†Šç™»å…¥ç³»çµ±\n- ğŸ‘¤ é¡§å®¢å’Œç¾ç”²å¸«è³‡æ–™ç®¡ç†\n- ğŸ“… é ç´„å’Œæ™‚æ®µç®¡ç†\n- ğŸ¨ ç¾ç”²åœ–ç‰‡ AI æ¨™è¨»\n- ğŸ” æ™ºèƒ½æœå°‹å’Œç¯©é¸\n- â° ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“è¨­å®š",
                    "version": "1.0.0",
                    "contact": {
                        "name": "ç¾ç”²é ç´„ç³»çµ± API æ”¯æ´",
                        "email": "support@nailit.com"
                    }
                },
                "servers": [
                    {
                        "url": "http://localhost:4000/api",
                        "description": "é–‹ç™¼ç’°å¢ƒ"
                    }
                ],
                "paths": {
                    "/register": {
                        "post": {
                            "tags": ["èªè­‰"],
                            "summary": "ç”¨æˆ¶è¨»å†Š",
                            "description": "è¨»å†Šæ–°çš„é¡§å®¢æˆ–ç¾ç”²å¸«å¸³è™Ÿ",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["role", "email", "password"],
                                            "properties": {
                                                "role": {"type": "string", "enum": ["customer", "artist"]},
                                                "email": {"type": "string", "format": "email"},
                                                "password": {"type": "string", "minLength": 6},
                                                "username": {"type": "string"},
                                                "studio_name": {"type": "string"},
                                                "city": {"type": "string"},
                                                "district": {"type": "string"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {"description": "è¨»å†ŠæˆåŠŸ"},
                                "400": {"description": "è«‹æ±‚åƒæ•¸éŒ¯èª¤"}
                            }
                        }
                    },
                    "/login": {
                        "post": {
                            "tags": ["èªè­‰"],
                            "summary": "ç”¨æˆ¶ç™»å…¥",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["email", "password"],
                                            "properties": {
                                                "email": {"type": "string", "format": "email"},
                                                "password": {"type": "string"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {"description": "ç™»å…¥æˆåŠŸ"},
                                "401": {"description": "èªè­‰å¤±æ•—"}
                            }
                        }
                    },
                    "/logout": {
                        "post": {
                            "tags": ["èªè­‰"],
                            "summary": "ç”¨æˆ¶ç™»å‡º",
                            "responses": {
                                "200": {"description": "ç™»å‡ºæˆåŠŸ"}
                            }
                        }
                    },
                    "/customers/{id}": {
                        "get": {
                            "tags": ["é¡§å®¢ç®¡ç†"],
                            "summary": "ç²å–é¡§å®¢è³‡æ–™",
                            "parameters": [
                                {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"},
                                "404": {"description": "é¡§å®¢ä¸å­˜åœ¨"}
                            }
                        },
                        "put": {
                            "tags": ["é¡§å®¢ç®¡ç†"],
                            "summary": "æ›´æ–°é¡§å®¢è³‡æ–™",
                            "parameters": [
                                {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "properties": {"name": {"type": "string"}}
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {"description": "æ›´æ–°æˆåŠŸ"}
                            }
                        }
                    },
                    "/customers/{id}/appointments": {
                        "get": {
                            "tags": ["é¡§å®¢ç®¡ç†"],
                            "summary": "ç²å–é¡§å®¢é ç´„è¨˜éŒ„",
                            "parameters": [
                                {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"}
                            }
                        }
                    },
                    "/artists/{id}": {
                        "get": {
                            "tags": ["ç¾ç”²å¸«ç®¡ç†"],
                            "summary": "ç²å–ç¾ç”²å¸«è³‡æ–™",
                            "parameters": [
                                {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"},
                                "404": {"description": "ç¾ç”²å¸«ä¸å­˜åœ¨"}
                            }
                        },
                        "put": {
                            "tags": ["ç¾ç”²å¸«ç®¡ç†"],
                            "summary": "æ›´æ–°ç¾ç”²å¸«è³‡æ–™",
                            "parameters": [
                                {"name": "id", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "properties": {
                                                "studio_name": {"type": "string"},
                                                "city": {"type": "string"},
                                                "district": {"type": "string"},
                                                "bio": {"type": "string"},
                                                "styles": {"type": "array", "items": {"type": "string"}},
                                                "priceLow": {"type": "number"},
                                                "priceHigh": {"type": "number"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {"description": "æ›´æ–°æˆåŠŸ"}
                            }
                        }
                    },
                    "/artists/{artistId}/availability": {
                        "get": {
                            "tags": ["ç‡Ÿæ¥­æ™‚é–“ç®¡ç†"],
                            "summary": "ç²å–ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“",
                            "parameters": [
                                {"name": "artistId", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"}
                            }
                        },
                        "post": {
                            "tags": ["ç‡Ÿæ¥­æ™‚é–“ç®¡ç†"],
                            "summary": "è¨­å®šç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“",
                            "parameters": [
                                {"name": "artistId", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["availability"],
                                            "properties": {
                                                "availability": {
                                                    "type": "object",
                                                    "properties": {
                                                        "Mon": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Tue": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Wed": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Thu": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Fri": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Sat": {"type": "array", "items": {"type": "string"}, "example": ["10:00", "14:00"]},
                                                        "Sun": {"type": "array", "items": {"type": "string"}, "example": []}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {"description": "è¨­å®šæˆåŠŸ"}
                            }
                        }
                    },
                    "/artists/{artistId}/slots": {
                        "get": {
                            "tags": ["ç‡Ÿæ¥­æ™‚é–“ç®¡ç†"],
                            "summary": "ç²å–æŒ‡å®šæ—¥æœŸå¯é ç´„æ™‚æ®µ",
                            "parameters": [
                                {"name": "artistId", "in": "path", "required": true, "schema": {"type": "string"}},
                                {"name": "date", "in": "query", "required": true, "schema": {"type": "string", "format": "date"}, "description": "æŸ¥è©¢æ—¥æœŸ (YYYY-MM-DD)"}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"}
                            }
                        }
                    },
                    "/reservations/book": {
                        "post": {
                            "tags": ["é ç´„ç®¡ç†"],
                            "summary": "é ç´„ç¾ç”²æœå‹™",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["customerId", "artistId", "date", "time"],
                                            "properties": {
                                                "customerId": {"type": "string"},
                                                "artistId": {"type": "string"},
                                                "date": {"type": "string", "format": "date"},
                                                "time": {"type": "string"},
                                                "note": {"type": "string"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {"description": "é ç´„æˆåŠŸ"},
                                "400": {"description": "é ç´„å¤±æ•—"}
                            }
                        }
                    },
                    "/reservations/artist/{artistId}": {
                        "get": {
                            "tags": ["é ç´„ç®¡ç†"],
                            "summary": "ç²å–ç¾ç”²å¸«çš„é ç´„åˆ—è¡¨",
                            "parameters": [
                                {"name": "artistId", "in": "path", "required": true, "schema": {"type": "string"}},
                                {"name": "status", "in": "query", "schema": {"type": "string", "enum": ["pending", "confirmed", "completed", "cancelled"]}},
                                {"name": "date", "in": "query", "schema": {"type": "string", "format": "date"}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"}
                            }
                        }
                    },
                    "/reservations/customer/{customerId}": {
                        "get": {
                            "tags": ["é ç´„ç®¡ç†"],
                            "summary": "ç²å–é¡§å®¢çš„é ç´„åˆ—è¡¨",
                            "parameters": [
                                {"name": "customerId", "in": "path", "required": true, "schema": {"type": "string"}},
                                {"name": "status", "in": "query", "schema": {"type": "string", "enum": ["pending", "confirmed", "completed", "cancelled"]}}
                            ],
                            "responses": {
                                "200": {"description": "ç²å–æˆåŠŸ"}
                            }
                        }
                    },
                    "/reservations/{appointmentId}/status": {
                        "put": {
                            "tags": ["é ç´„ç®¡ç†"],
                            "summary": "æ›´æ–°é ç´„ç‹€æ…‹",
                            "parameters": [
                                {"name": "appointmentId", "in": "path", "required": true, "schema": {"type": "string"}}
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["status"],
                                            "properties": {
                                                "status": {"type": "string", "enum": ["pending", "confirmed", "completed", "cancelled"]},
                                                "reason": {"type": "string"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {"description": "æ›´æ–°æˆåŠŸ"}
                            }
                        }
                    },
                    "/tag": {
                        "post": {
                            "tags": ["ç¾ç”²æ¨™è¨»"],
                            "summary": "æ‰¹é‡æ¨™è¨»ç¾ç”²åœ–ç‰‡",
                            "description": "ä¸Šå‚³ç¾ç”²åœ–ç‰‡ä¸¦ä½¿ç”¨ AI é€²è¡Œè‡ªå‹•æ¨™è¨»ã€‚æ”¯æ´åŒæ™‚ä¸Šå‚³æœ€å¤š 10 å¼µåœ–ç‰‡ï¼Œç³»çµ±æœƒè‡ªå‹•åˆ†ææ¯å¼µåœ–ç‰‡çš„é¢¨æ ¼ã€å½¢ç‹€ã€é¡è‰²ã€è³ªæ„Ÿã€è£é£¾å’Œä¸»é¡Œç­‰å±¬æ€§ã€‚",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "multipart/form-data": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["images", "placeId"],
                                            "properties": {
                                                "images": {
                                                    "type": "array",
                                                    "items": {"type": "string", "format": "binary"},
                                                    "minItems": 1,
                                                    "maxItems": 10,
                                                    "description": "ç¾ç”²åœ–ç‰‡æ–‡ä»¶ï¼ˆæ”¯æ´ JPG, JPEG, PNG æ ¼å¼ï¼Œæœ€å¤š 10 å¼µï¼‰"
                                                },
                                                "placeId": {
                                                    "type": "string",
                                                    "description": "ç¾ç”²åº—çš„ Google Places ID",
                                                    "example": "ChIJN1t_tDeuEmsRUsoyG83frY4"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {"description": "æ¨™è¨»è™•ç†æˆåŠŸ"},
                                "400": {"description": "è«‹æ±‚åƒæ•¸éŒ¯èª¤"}
                            }
                        }
                    },
                    "/search-supabase": {
                        "get": {
                            "tags": ["æœå°‹"],
                            "summary": "æ™ºèƒ½æœå°‹ç¾ç”²ä½œå“",
                            "description": "æ ¹æ“šå¤šç¨®æ¢ä»¶æœå°‹ç¾ç”²ä½œå“ï¼Œæ”¯æ´ç¾ç”²é¢¨æ ¼ã€ç¾ç”²å¸«æ¢ä»¶ç­‰è¤‡åˆæœå°‹",
                            "parameters": [
                                {
                                    "name": "style",
                                    "in": "query",
                                    "schema": {
                                        "type": "array",
                                        "items": {"type": "string", "enum": ["è·³è‰²", "å–®è‰²", "æ‰‹ç¹ª", "æ³•å¼", "æ¼¸å±¤", "è²“çœ¼", "é¡é¢", "é›•èŠ±", "äº®ç‰‡"]}
                                    },
                                    "description": "ç¾ç”²é¢¨æ ¼ç¯©é¸"
                                },
                                {
                                    "name": "shape",
                                    "in": "query",
                                    "schema": {
                                        "type": "array",
                                        "items": {"type": "string", "enum": ["æ–¹å½¢ï¼ˆSquareï¼‰", "åœ“å½¢ï¼ˆRoundï¼‰", "æ©¢åœ“å½¢ï¼ˆOvalï¼‰", "æ–¹åœ“å½¢ï¼ˆSquovalï¼‰", "å°–å½¢ï¼ˆStilettoï¼‰"]}
                                    },
                                    "description": "æŒ‡ç”²å½¢ç‹€ç¯©é¸"
                                },
                                {
                                    "name": "color",
                                    "in": "query",
                                    "schema": {
                                        "type": "array",
                                        "items": {"type": "string", "enum": ["è£¸ç²‰è‰²", "ç²‰è‰²", "ç™½è‰²","ç´…è‰²","æ©™è‰²", "é»ƒè‰²", "ç¶ è‰²","è—è‰²","ç´«è‰²", "ç°è‰²", "é»‘è‰²", "æ£•è‰²", "é…’ç´…è‰²", "å’–å•¡è‰²", "é‡‘å±¬éŠ€","éŠ€è‰²","äº®ç‰‡"]}
                                    },
                                    "description": "é¡è‰²ç¯©é¸"
                                },
                                {"name": "city", "in": "query", "schema": {"type": "string"}, "description": "åŸå¸‚ç¯©é¸"},
                                {"name": "district", "in": "query", "schema": {"type": "array", "items": {"type": "string"}}, "description": "å€åŸŸç¯©é¸"},
                                {"name": "priceMin", "in": "query", "schema": {"type": "number"}, "description": "æœ€ä½åƒ¹æ ¼ç¯©é¸"},
                                {"name": "priceMax", "in": "query", "schema": {"type": "number"}, "description": "æœ€é«˜åƒ¹æ ¼ç¯©é¸"},
                                {"name": "rating", "in": "query", "schema": {"type": "number", "minimum": 0, "maximum": 5}, "description": "æœ€ä½è©•åˆ†ç¯©é¸"},
                                {"name": "limit", "in": "query", "schema": {"type": "integer", "minimum": 1, "maximum": 100, "default": 20}, "description": "çµæœæ•¸é‡é™åˆ¶"}
                            ],
                            "responses": {
                                "200": {"description": "æœå°‹æˆåŠŸ"}
                            }
                        }
                    }
                },
                "tags": [
                    {"name": "èªè­‰", "description": "ç”¨æˆ¶è¨»å†Šã€ç™»å…¥ã€ç™»å‡ºç›¸é—œæ“ä½œ"},
                    {"name": "é¡§å®¢ç®¡ç†", "description": "é¡§å®¢è³‡æ–™ç®¡ç†å’Œé ç´„æŸ¥è©¢"},
                    {"name": "ç¾ç”²å¸«ç®¡ç†", "description": "ç¾ç”²å¸«è³‡æ–™ç®¡ç†å’Œæœå‹™è¨­å®š"},
                    {"name": "ç‡Ÿæ¥­æ™‚é–“ç®¡ç†", "description": "ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“å’Œå¯é ç´„æ™‚æ®µç®¡ç†"},
                    {"name": "é ç´„ç®¡ç†", "description": "é ç´„å‰µå»ºã€æŸ¥è©¢å’Œç‹€æ…‹ç®¡ç†"},
                    {"name": "ç¾ç”²æ¨™è¨»", "description": "ç¾ç”²åœ–ç‰‡ AI æ¨™è¨»ç›¸é—œæ“ä½œ"},
                    {"name": "æœå°‹", "description": "ç¾ç”²ä½œå“æ™ºèƒ½æœå°‹å’Œç¯©é¸"}
                ]
            };

            // åˆå§‹åŒ– Swagger UI
            const ui = SwaggerUIBundle({
                spec: completeApiSpec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                tryItOutEnabled: true,
                requestInterceptor: function(request) {
                    console.log('API Request:', request);
                    return request;
                },
                responseInterceptor: function(response) {
                    console.log('API Response:', response);
                    return response;
                },
                onComplete: function() {
                    console.log('å®Œæ•´ API æ–‡æª”è¼‰å…¥å®Œæˆ');
                },
                validatorUrl: null,
                docExpansion: 'list',
                defaultModelExpandDepth: 2,
                defaultModelsExpandDepth: 1,
                displayRequestDuration: true,
                filter: true,
                showExtensions: true,
                showCommonExtensions: true,
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
                tagsSorter: 'alpha',
                operationsSorter: 'alpha'
            });
        };
    </script>
</body>
</html> 