# ç¾ç”²é ç´„ç³»çµ±å®Œæ•´ API æ–‡æª”
openapi: 3.0.3
info:
  title: ç¾ç”²é ç´„ç³»çµ±å®Œæ•´ API
  description: |
    å®Œæ•´çš„ç¾ç”²é ç´„ç³»çµ± APIï¼ŒåŒ…å«ç”¨æˆ¶è¨»å†Šç™»å…¥ã€ç¾ç”²å¸«ç®¡ç†ã€é ç´„ç³»çµ±ã€åœ–ç‰‡æ¨™è¨»å’Œæœå°‹åŠŸèƒ½ã€‚
    
    ## ä¸»è¦åŠŸèƒ½
    - ğŸ” ç”¨æˆ¶è¨»å†Šç™»å…¥ç³»çµ±
    - ğŸ‘¤ é¡§å®¢å’Œç¾ç”²å¸«è³‡æ–™ç®¡ç†
    - ğŸ“… é ç´„å’Œæ™‚æ®µç®¡ç†
    - ğŸ¨ ç¾ç”²åœ–ç‰‡ AI æ¨™è¨»
    - ğŸ” æ™ºèƒ½æœå°‹å’Œç¯©é¸
    - â° ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“è¨­å®š
  version: 1.0.0
  contact:
    name: ç¾ç”²é ç´„ç³»çµ± API æ”¯æ´
    email: support@nailit.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:4000/api
    description: é–‹ç™¼ç’°å¢ƒ
  - url: https://api.nailit.com/api
    description: ç”Ÿç”¢ç’°å¢ƒ

paths:
  # ========== èªè­‰ç›¸é—œ API ==========
  /register:
    post:
      tags: [èªè­‰]
      summary: ç”¨æˆ¶è¨»å†Š
      description: è¨»å†Šæ–°çš„é¡§å®¢æˆ–ç¾ç”²å¸«å¸³è™Ÿ
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [role, email, password]
              properties:
                role:
                  type: string
                  enum: [customer, artist]
                email:
                  type: string
                  format: email
                password:
                  type: string
                  minLength: 6
                username:
                  type: string
                studio_name:
                  type: string
                city:
                  type: string
                district:
                  type: string
                bio:
                  type: string
                styles:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: è¨»å†ŠæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
        '400':
          description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /login:
    post:
      tags: [èªè­‰]
      summary: ç”¨æˆ¶ç™»å…¥
      description: ç”¨æˆ¶ç™»å…¥ç³»çµ±
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
      responses:
        '200':
          description: ç™»å…¥æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: èªè­‰å¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /logout:
    post:
      tags: [èªè­‰]
      summary: ç”¨æˆ¶ç™»å‡º
      description: ç”¨æˆ¶ç™»å‡ºç³»çµ±
      operationId: logoutUser
      responses:
        '200':
          description: ç™»å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Logout successful"

  # ========== é¡§å®¢ç®¡ç† API ==========
  /customers/{id}:
    get:
      tags: [é¡§å®¢ç®¡ç†]
      summary: ç²å–é¡§å®¢è³‡æ–™
      description: æ ¹æ“šç”¨æˆ¶IDç²å–é¡§å®¢è©³ç´°è³‡æ–™
      operationId: getCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: é¡§å®¢çš„ç”¨æˆ¶ID
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerResponse'
        '404':
          description: é¡§å®¢ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags: [é¡§å®¢ç®¡ç†]
      summary: æ›´æ–°é¡§å®¢è³‡æ–™
      description: æ›´æ–°é¡§å®¢çš„åŸºæœ¬è³‡æ–™
      operationId: updateCustomer
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: é¡§å®¢çš„ç”¨æˆ¶ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCustomerResponse'

  /customers/{id}/appointments:
    get:
      tags: [é¡§å®¢ç®¡ç†]
      summary: ç²å–é¡§å®¢é ç´„è¨˜éŒ„
      description: ç²å–æŒ‡å®šé¡§å®¢çš„æ‰€æœ‰é ç´„è¨˜éŒ„
      operationId: getCustomerAppointments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: é¡§å®¢çš„ç”¨æˆ¶ID
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerAppointmentsResponse'

  # ========== ç¾ç”²å¸«ç®¡ç† API ==========
  /artists/{id}:
    get:
      tags: [ç¾ç”²å¸«ç®¡ç†]
      summary: ç²å–ç¾ç”²å¸«è³‡æ–™
      description: æ ¹æ“šç”¨æˆ¶IDç²å–ç¾ç”²å¸«è©³ç´°è³‡æ–™
      operationId: getArtist
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArtistResponse'
        '404':
          description: ç¾ç”²å¸«ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags: [ç¾ç”²å¸«ç®¡ç†]
      summary: æ›´æ–°ç¾ç”²å¸«è³‡æ–™
      description: æ›´æ–°ç¾ç”²å¸«çš„åŸºæœ¬è³‡æ–™å’Œæœå‹™è³‡è¨Š
      operationId: updateArtist
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateArtistRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateArtistResponse'

  # ========== ç‡Ÿæ¥­æ™‚é–“ç®¡ç† API ==========
  /artists/{artistId}/availability:
    get:
      tags: [ç‡Ÿæ¥­æ™‚é–“ç®¡ç†]
      summary: ç²å–ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“
      description: ç²å–æŒ‡å®šç¾ç”²å¸«çš„æ¯é€±ç‡Ÿæ¥­æ™‚é–“è¨­å®š
      operationId: getArtistAvailability
      parameters:
        - name: artistId
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AvailabilityResponse'

    post:
      tags: [ç‡Ÿæ¥­æ™‚é–“ç®¡ç†]
      summary: è¨­å®šç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“
      description: è¨­å®šæˆ–æ›´æ–°ç¾ç”²å¸«çš„æ¯é€±ç‡Ÿæ¥­æ™‚é–“
      operationId: setArtistAvailability
      parameters:
        - name: artistId
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetAvailabilityRequest'
      responses:
        '201':
          description: è¨­å®šæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SetAvailabilityResponse'

  /artists/{artistId}/slots:
    get:
      tags: [ç‡Ÿæ¥­æ™‚é–“ç®¡ç†]
      summary: ç²å–æŒ‡å®šæ—¥æœŸå¯é ç´„æ™‚æ®µ
      description: ç²å–ç¾ç”²å¸«åœ¨æŒ‡å®šæ—¥æœŸçš„å¯é ç´„æ™‚æ®µ
      operationId: getAvailableSlots
      parameters:
        - name: artistId
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
        - name: date
          in: query
          required: true
          schema:
            type: string
            format: date
          description: æŸ¥è©¢æ—¥æœŸ (YYYY-MM-DD æ ¼å¼)
          example: "2024-01-15"
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SlotsResponse'

  # ========== é ç´„ç®¡ç† API ==========
  /reservations/book:
    post:
      tags: [é ç´„ç®¡ç†]
      summary: é ç´„ç¾ç”²æœå‹™
      description: é¡§å®¢é ç´„ç¾ç”²æœå‹™
      operationId: bookAppointment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookAppointmentRequest'
      responses:
        '201':
          description: é ç´„æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BookAppointmentResponse'
        '400':
          description: é ç´„å¤±æ•—
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /reservations/artist/{artistId}:
    get:
      tags: [é ç´„ç®¡ç†]
      summary: ç²å–ç¾ç”²å¸«çš„é ç´„åˆ—è¡¨
      description: ç²å–æŒ‡å®šç¾ç”²å¸«çš„æ‰€æœ‰é ç´„è¨˜éŒ„
      operationId: getArtistReservations
      parameters:
        - name: artistId
          in: path
          required: true
          schema:
            type: string
          description: ç¾ç”²å¸«çš„ç”¨æˆ¶ID
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, confirmed, completed, cancelled]
          description: ç¯©é¸é ç´„ç‹€æ…‹
        - name: date
          in: query
          schema:
            type: string
            format: date
          description: ç¯©é¸ç‰¹å®šæ—¥æœŸçš„é ç´„
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ArtistReservationsResponse'

  /reservations/customer/{customerId}:
    get:
      tags: [é ç´„ç®¡ç†]
      summary: ç²å–é¡§å®¢çš„é ç´„åˆ—è¡¨
      description: ç²å–æŒ‡å®šé¡§å®¢çš„æ‰€æœ‰é ç´„è¨˜éŒ„
      operationId: getCustomerReservations
      parameters:
        - name: customerId
          in: path
          required: true
          schema:
            type: string
          description: é¡§å®¢çš„ç”¨æˆ¶ID
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, confirmed, completed, cancelled]
          description: ç¯©é¸é ç´„ç‹€æ…‹
      responses:
        '200':
          description: ç²å–æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerReservationsResponse'

  /reservations/{appointmentId}/status:
    put:
      tags: [é ç´„ç®¡ç†]
      summary: æ›´æ–°é ç´„ç‹€æ…‹
      description: ç¢ºèªã€å–æ¶ˆæˆ–å®Œæˆé ç´„
      operationId: updateAppointmentStatus
      parameters:
        - name: appointmentId
          in: path
          required: true
          schema:
            type: string
          description: é ç´„ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAppointmentStatusRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateAppointmentStatusResponse'

  # ========== ç¾ç”²æ¨™è¨» API ==========
  /tag:
    post:
      tags: [ç¾ç”²æ¨™è¨»]
      summary: æ‰¹é‡æ¨™è¨»ç¾ç”²åœ–ç‰‡
      description: |
        ä¸Šå‚³ç¾ç”²åœ–ç‰‡ä¸¦ä½¿ç”¨ AI é€²è¡Œè‡ªå‹•æ¨™è¨»ã€‚æ”¯æ´åŒæ™‚ä¸Šå‚³æœ€å¤š 10 å¼µåœ–ç‰‡ï¼Œ
        ç³»çµ±æœƒè‡ªå‹•åˆ†ææ¯å¼µåœ–ç‰‡çš„é¢¨æ ¼ã€å½¢ç‹€ã€é¡è‰²ã€è³ªæ„Ÿã€è£é£¾å’Œä¸»é¡Œç­‰å±¬æ€§ã€‚
      operationId: tagNailImages
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - images
                - placeId
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                  minItems: 1
                  maxItems: 10
                  description: ç¾ç”²åœ–ç‰‡æ–‡ä»¶ï¼ˆæ”¯æ´ JPG, JPEG, PNG æ ¼å¼ï¼Œæœ€å¤š 10 å¼µï¼‰
                placeId:
                  type: string
                  description: ç¾ç”²åº—çš„ Google Places ID
                  example: "ChIJN1t_tDeuEmsRUsoyG83frY4"
            encoding:
              images:
                contentType: image/jpeg, image/png, image/jpg
      responses:
        '200':
          description: æ¨™è¨»è™•ç†æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagResponse'
        '400':
          description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ========== æœå°‹ API ==========
  /search-supabase:
    get:
      tags: [æœå°‹]
      summary: æ™ºèƒ½æœå°‹ç¾ç”²ä½œå“
      description: |
        æ ¹æ“šå¤šç¨®æ¢ä»¶æœå°‹ç¾ç”²ä½œå“ï¼Œæ”¯æ´ç¾ç”²é¢¨æ ¼ã€ç¾ç”²å¸«æ¢ä»¶ç­‰è¤‡åˆæœå°‹
      operationId: searchNailImages
      parameters:
        - name: style
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["æ¼¸å±¤", "è·³è‰²", "è²“çœ¼", "å–®è‰²", "æ³•å¼", "æ‰‹ç¹ª", "é¡é¢"]
          description: ç¾ç”²é¢¨æ ¼ç¯©é¸
        - name: shape
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["æ–¹å½¢ï¼ˆSquareï¼‰", "åœ“å½¢ï¼ˆRoundï¼‰", "æ©¢åœ“å½¢ï¼ˆOvalï¼‰", "æ–¹åœ“å½¢ï¼ˆSquovalï¼‰", "å°–å½¢ï¼ˆStilettoï¼‰"]
          description: æŒ‡ç”²å½¢ç‹€ç¯©é¸
        - name: color
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["ç´…è‰²", "æ©™è‰²", "é»ƒè‰²", "ç¶ è‰²", "è—è‰²", "é›è‰²", "ç´«è‰²", "é»‘è‰²", "ç™½è‰²", "ç°è‰²", "ç²‰è‰²", "é‡‘å±¬éŠ€", "è£¸ç²‰è‰²"]
          description: é¡è‰²ç¯©é¸
        - name: texture
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["å…‰æ¾¤ï¼ˆGlossyï¼‰", "éœ§é¢ï¼ˆMatteï¼‰", "äº®ç‰‡ï¼ˆGlitterï¼‰", "ç å…‰ï¼ˆPearlescentï¼‰", "ç ‚ç³–æ„Ÿï¼ˆSugarï¼‰", "é‡‘å±¬ç®”ï¼ˆFoilï¼‰", "çµ²çµ¨ï¼ˆVelvetï¼‰"]
          description: è³ªæ„Ÿç¯©é¸
        - name: decorations
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["æ°´é‘½ï¼ˆRhinestoneï¼‰", "é›•èŠ±ï¼ˆ3D artï¼‰", "é‡‘å±¬é£¾ç‰‡ï¼ˆMetal piecesï¼‰", "è²æ®¼ï¼ˆShellï¼‰", "è²¼ç´™ï¼ˆStickerï¼‰", "ç•«åœ–ç« ï¼ˆStampï¼‰"]
          description: è£é£¾å…ƒç´ ç¯©é¸
        - name: theme
          in: query
          schema:
            type: array
            items:
              type: string
              enum: ["æ—¥å¸¸", "æ˜¥", "å¤", "ç§‹", "å†¬", "éŸ“ç³»", "æ—¥ç³»", "æ­ç¾é¢¨", "ç°¡ç´„", "å¯æ„›", "å„ªé›…", "ç¹½ç´›"]
          description: ä¸»é¡Œé¢¨æ ¼ç¯©é¸
        - name: city
          in: query
          schema:
            type: string
          description: åŸå¸‚ç¯©é¸
        - name: district
          in: query
          schema:
            type: array
            items:
              type: string
          description: å€åŸŸç¯©é¸
        - name: priceMin
          in: query
          schema:
            type: number
          description: æœ€ä½åƒ¹æ ¼ç¯©é¸
        - name: priceMax
          in: query
          schema:
            type: number
          description: æœ€é«˜åƒ¹æ ¼ç¯©é¸
        - name: rating
          in: query
          schema:
            type: number
            minimum: 0
            maximum: 5
          description: æœ€ä½è©•åˆ†ç¯©é¸
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: çµæœæ•¸é‡é™åˆ¶
      responses:
        '200':
          description: æœå°‹æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'

components:
  schemas:
    # ========== èªè­‰ç›¸é—œ Schema ==========
    RegisterRequest:
      type: object
      required:
        - role
        - email
        - password
      properties:
        role:
          type: string
          enum: [customer, artist]
          description: ç”¨æˆ¶è§’è‰²
        email:
          type: string
          format: email
          description: é›»å­éƒµä»¶
        password:
          type: string
          minLength: 6
          description: å¯†ç¢¼ï¼ˆè‡³å°‘6å€‹å­—ç¬¦ï¼‰
        username:
          type: string
          description: ç”¨æˆ¶åç¨±ï¼ˆé¡§å®¢å¿…å¡«ï¼‰
        studio_name:
          type: string
          description: å·¥ä½œå®¤åç¨±ï¼ˆç¾ç”²å¸«å¿…å¡«ï¼‰
        city:
          type: string
          description: åŸå¸‚ï¼ˆç¾ç”²å¸«å¯å¡«ï¼‰
        district:
          type: string
          description: å€åŸŸï¼ˆç¾ç”²å¸«å¯å¡«ï¼‰
        bio:
          type: string
          description: å€‹äººç°¡ä»‹ï¼ˆç¾ç”²å¸«å¯å¡«ï¼‰
        styles:
          type: array
          items:
            type: string
          description: æ“…é•·é¢¨æ ¼ï¼ˆç¾ç”²å¸«å¯å¡«ï¼‰

    RegisterResponse:
      type: object
      properties:
        message:
          type: string
          example: "Registration successful"
        id:
          type: string
          description: ç”¨æˆ¶ID
        user:
          type: object
          properties:
            email:
              type: string
            role:
              type: string

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string

    LoginResponse:
      type: object
      properties:
        message:
          type: string
          example: "Login successful"
        user:
          type: object
          properties:
            id:
              type: string
            email:
              type: string
            role:
              type: string
            name:
              type: string

    # ========== é¡§å®¢ç®¡ç† Schema ==========
    CustomerResponse:
      type: object
      properties:
        success:
          type: boolean
        customer:
          $ref: '#/components/schemas/Customer'

    Customer:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        name:
          type: string
        avatar_url:
          type: string
        created_at:
          type: string
          format: date-time

    UpdateCustomerRequest:
      type: object
      properties:
        name:
          type: string

    UpdateCustomerResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        customer:
          type: object

    CustomerAppointmentsResponse:
      type: object
      properties:
        success:
          type: boolean
        appointments:
          type: array
          items:
            $ref: '#/components/schemas/Appointment'

    # ========== ç¾ç”²å¸«ç®¡ç† Schema ==========
    ArtistResponse:
      type: object
      properties:
        success:
          type: boolean
        artist:
          $ref: '#/components/schemas/Artist'

    Artist:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        studio:
          type: string
        city:
          type: string
        district:
          type: string
        bio:
          type: string
        styles:
          type: array
          items:
            type: string
        priceLow:
          type: number
        priceHigh:
          type: number
        rating:
          type: number
        image:
          type: string
        created_at:
          type: string
          format: date-time

    UpdateArtistRequest:
      type: object
      properties:
        studio_name:
          type: string
        city:
          type: string
        district:
          type: string
        bio:
          type: string
        styles:
          type: array
          items:
            type: string
        priceLow:
          type: number
        priceHigh:
          type: number

    UpdateArtistResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        artist:
          type: object

    # ========== ç‡Ÿæ¥­æ™‚é–“ç®¡ç† Schema ==========
    AvailabilityResponse:
      type: object
      properties:
        success:
          type: boolean
        artistId:
          type: string
        data:
          type: object
          properties:
            availability:
              $ref: '#/components/schemas/WeeklyAvailability'

    WeeklyAvailability:
      type: object
      properties:
        Mon:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Tue:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Wed:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Thu:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Fri:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Sat:
          type: array
          items:
            type: string
          example: ["10:00", "14:00"]
        Sun:
          type: array
          items:
            type: string
          example: []

    SetAvailabilityRequest:
      type: object
      required:
        - availability
      properties:
        availability:
          $ref: '#/components/schemas/WeeklyAvailability'

    SetAvailabilityResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        availability:
          $ref: '#/components/schemas/WeeklyAvailability'

    SlotsResponse:
      type: object
      properties:
        success:
          type: boolean
        artistId:
          type: string
        artistName:
          type: string
        date:
          type: string
          format: date
        availableSlots:
          type: array
          items:
            type: string
          example: ["10:00", "14:00", "16:00"]
        bookedSlots:
          type: array
          items:
            type: string
          example: ["12:00"]

    # ========== é ç´„ç®¡ç† Schema ==========
    BookAppointmentRequest:
      type: object
      required:
        - customerId
        - artistId
        - date
        - time
      properties:
        customerId:
          type: string
          description: é¡§å®¢ID
        artistId:
          type: string
          description: ç¾ç”²å¸«ID
        date:
          type: string
          format: date
          description: é ç´„æ—¥æœŸ
        time:
          type: string
          description: é ç´„æ™‚é–“
        note:
          type: string
          description: å‚™è¨»

    BookAppointmentResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        appointment:
          $ref: '#/components/schemas/Appointment'

    Appointment:
      type: object
      properties:
        id:
          type: string
        customerName:
          type: string
        artistName:
          type: string
        date:
          type: string
          format: date
        time:
          type: string
        status:
          type: string
          enum: [pending, confirmed, completed, cancelled]
        note:
          type: string
        createdAt:
          type: string
          format: date-time

    ArtistReservationsResponse:
      type: object
      properties:
        success:
          type: boolean
        artistId:
          type: string
        artistName:
          type: string
        appointments:
          type: array
          items:
            $ref: '#/components/schemas/Appointment'
        total:
          type: integer

    CustomerReservationsResponse:
      type: object
      properties:
        success:
          type: boolean
        customerId:
          type: string
        customerName:
          type: string
        appointments:
          type: array
          items:
            $ref: '#/components/schemas/Appointment'
        total:
          type: integer

    UpdateAppointmentStatusRequest:
      type: object
      required:
        - status
      properties:
        status:
          type: string
          enum: [pending, confirmed, completed, cancelled]
        reason:
          type: string
          description: å–æ¶ˆåŸå› ï¼ˆç‹€æ…‹ç‚ºcancelledæ™‚å¯å¡«ï¼‰

    UpdateAppointmentStatusResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        appointment:
          type: object
          properties:
            id:
              type: string
            customerName:
              type: string
            artistName:
              type: string
            date:
              type: string
            time:
              type: string
            oldStatus:
              type: string
            newStatus:
              type: string
            reason:
              type: string

    # ========== ç¾ç”²æ¨™è¨» Schema ==========
    TagResponse:
      type: object
      required:
        - message
        - successful
        - failed
        - totalInAllResults
      properties:
        message:
          type: string
          description: è™•ç†çµæœæ‘˜è¦è¨Šæ¯
          example: "è™•ç†å®Œæˆï¼æˆåŠŸ: 3 å¼µï¼Œå¤±æ•—: 0 å¼µ"
        successful:
          type: array
          items:
            $ref: '#/components/schemas/SuccessfulImage'
          description: æˆåŠŸè™•ç†çš„åœ–ç‰‡åˆ—è¡¨
        failed:
          type: array
          items:
            $ref: '#/components/schemas/FailedImage'
          description: è™•ç†å¤±æ•—çš„åœ–ç‰‡åˆ—è¡¨
        totalInAllResults:
          type: integer
          description: ç¸½å…±æ¨™è¨»éçš„åœ–ç‰‡æ•¸é‡
          example: 125

    SuccessfulImage:
      type: object
      required:
        - originalName
        - filename
        - imageUrl
        - tags
        - nailImagesSaved
      properties:
        originalName:
          type: string
          description: åŸå§‹æª”æ¡ˆåç¨±
          example: "nail_design_1.jpg"
        filename:
          type: string
          description: ç³»çµ±ç”Ÿæˆçš„å”¯ä¸€æª”æ¡ˆåç¨±
          example: "photo_placeid-ChIJN1t_tDeuEmsRUsoyG83frY4_idx-1_1703123456789.jpg"
        imageUrl:
          type: string
          format: uri
          description: åœ–ç‰‡çš„å…¬é–‹å­˜å– URL
          example: "https://example.supabase.co/storage/v1/object/public/nailimg/allimgs/photo_placeid-ChIJN1t_tDeuEmsRUsoyG83frY4_idx-1_1703123456789.jpg"
        tags:
          $ref: '#/components/schemas/NailTags'
        nailImagesSaved:
          type: boolean
          description: æ˜¯å¦å·²æˆåŠŸå„²å­˜è‡³è³‡æ–™åº«
          example: true

    FailedImage:
      type: object
      required:
        - originalName
        - error
      properties:
        originalName:
          type: string
          description: åŸå§‹æª”æ¡ˆåç¨±
          example: "corrupted_image.jpg"
        error:
          type: string
          description: å¤±æ•—åŸå› 
          example: "AI æ¨™è¨»å¤±æ•—"

    NailTags:
      type: object
      properties:
        style:
          type: array
          items:
            type: string
            enum: ["æ¼¸å±¤", "è·³è‰²", "è²“çœ¼", "å–®è‰²", "æ³•å¼", "æ‰‹ç¹ª", "é¡é¢"]
          description: ç¾ç”²é¢¨æ ¼
          example: ["æ¼¸å±¤", "æ‰‹ç¹ª"]
        shape:
          type: array
          items:
            type: string
            enum: ["æ–¹å½¢ï¼ˆSquareï¼‰", "åœ“å½¢ï¼ˆRoundï¼‰", "æ©¢åœ“å½¢ï¼ˆOvalï¼‰", "æ–¹åœ“å½¢ï¼ˆSquovalï¼‰", "å°–å½¢ï¼ˆStilettoï¼‰"]
          description: æŒ‡ç”²å½¢ç‹€
          example: ["æ–¹åœ“å½¢"]
        color:
          type: array
          items:
            type: string
            enum: ["ç´…è‰²", "æ©™è‰²", "é»ƒè‰²", "ç¶ è‰²", "è—è‰²", "é›è‰²", "ç´«è‰²", "é»‘è‰²", "ç™½è‰²", "ç°è‰²", "ç²‰è‰²", "é‡‘å±¬éŠ€", "è£¸ç²‰è‰²"]
          description: é¡è‰²
          example: ["ç²‰è‰²", "ç™½è‰²"]
        texture:
          type: array
          items:
            type: string
            enum: ["å…‰æ¾¤ï¼ˆGlossyï¼‰", "éœ§é¢ï¼ˆMatteï¼‰", "äº®ç‰‡ï¼ˆGlitterï¼‰", "ç å…‰ï¼ˆPearlescentï¼‰", "ç ‚ç³–æ„Ÿï¼ˆSugarï¼‰", "é‡‘å±¬ç®”ï¼ˆFoilï¼‰", "çµ²çµ¨ï¼ˆVelvetï¼‰"]
          description: è³ªæ„Ÿ
          example: ["å…‰æ¾¤"]
        decorations:
          type: array
          items:
            type: string
            enum: ["æ°´é‘½ï¼ˆRhinestoneï¼‰", "é›•èŠ±ï¼ˆ3D artï¼‰", "é‡‘å±¬é£¾ç‰‡ï¼ˆMetal piecesï¼‰", "è²æ®¼ï¼ˆShellï¼‰", "è²¼ç´™ï¼ˆStickerï¼‰", "ç•«åœ–ç« ï¼ˆStampï¼‰"]
          description: è£é£¾å…ƒç´ 
          example: ["æ°´é‘½"]
        theme:
          type: array
          items:
            type: string
            enum: ["æ—¥å¸¸", "æ˜¥", "å¤", "ç§‹", "å†¬", "éŸ“ç³»", "æ—¥ç³»", "æ­ç¾é¢¨", "ç°¡ç´„", "å¯æ„›", "å„ªé›…", "ç¹½ç´›"]
          description: ä¸»é¡Œé¢¨æ ¼
          example: ["å„ªé›…", "æ—¥å¸¸"]

    # ========== æœå°‹ Schema ==========
    SearchResponse:
      type: object
      properties:
        success:
          type: boolean
        count:
          type: integer
          description: æœå°‹çµæœæ•¸é‡
        results:
          type: array
          items:
            $ref: '#/components/schemas/SearchResult'
        filters:
          type: object
          description: ä½¿ç”¨çš„ç¯©é¸æ¢ä»¶

    SearchResult:
      type: object
      properties:
        id:
          type: string
        filename:
          type: string
        imageUrl:
          type: string
        placeId:
          type: string
        createdAt:
          type: string
          format: date-time
        nailAttributes:
          $ref: '#/components/schemas/NailTags'
        artist:
          type: object
          properties:
            userId:
              type: string
            studioName:
              type: string
            city:
              type: string
            district:
              type: string
            priceMin:
              type: number
            priceMax:
              type: number
            rating:
              type: number

    # ========== é€šç”¨ Schema ==========
    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: éŒ¯èª¤è¨Šæ¯
          example: "è«‹æ±‚åƒæ•¸éŒ¯èª¤"
        detail:
          type: string
          description: è©³ç´°éŒ¯èª¤è³‡è¨Š
          example: "Missing required field: customerId"

tags:
  - name: èªè­‰
    description: ç”¨æˆ¶è¨»å†Šã€ç™»å…¥ã€ç™»å‡ºç›¸é—œæ“ä½œ
  - name: é¡§å®¢ç®¡ç†
    description: é¡§å®¢è³‡æ–™ç®¡ç†å’Œé ç´„æŸ¥è©¢
  - name: ç¾ç”²å¸«ç®¡ç†
    description: ç¾ç”²å¸«è³‡æ–™ç®¡ç†å’Œæœå‹™è¨­å®š
  - name: ç‡Ÿæ¥­æ™‚é–“ç®¡ç†
    description: ç¾ç”²å¸«ç‡Ÿæ¥­æ™‚é–“å’Œå¯é ç´„æ™‚æ®µç®¡ç†
  - name: é ç´„ç®¡ç†
    description: é ç´„å‰µå»ºã€æŸ¥è©¢å’Œç‹€æ…‹ç®¡ç†
  - name: ç¾ç”²æ¨™è¨»
    description: ç¾ç”²åœ–ç‰‡ AI æ¨™è¨»ç›¸é—œæ“ä½œ
  - name: æœå°‹
    description: ç¾ç”²ä½œå“æ™ºèƒ½æœå°‹å’Œç¯©é¸

externalDocs:
  description: å°ˆæ¡ˆ GitHub Repository
  url: https://github.com/your-org/nail-it 